## 计算机系统

### 中央处理单元

- CPU的功能

  - **运算器**：数据处理
    - ALU 算数逻辑单元 算数+逻辑
    - AC 累加寄存器 为ALU提供工作区 运算器中至少有一个AC
    - DR 数据缓冲寄存器 中转站
    - PSW 状态条件寄存器 
  - **控制器**：控制整个CPU的工作。程序执行、操作控制、时间控制 。**保证程序正常执行，处理异常事件**
    - IR 指令寄存器 **暂存指令** 指令译码器根据IR内容产生操作指令
    - PC 程序计数器 **储存程序执行指令的地址** 顺序：pc = pc + 1 。
    - AR 地址寄存器 保存当前CPU所访问的内存单元地址
    - ID 指令译码器 指令 = 操作码 + 地址码 对操作码字段进行分析解释

  📒 从题中的总结

  - 执行指令： 内存 -> DR -> IR 。在这之前，从PC取指令
  - AC为ALU执行运算时**提供数据**并**暂存运算结果**
  - 控制器决定了计算机运行过程的自动化
  - 指令寄存器对用户是完全透明的（无法访问，无感知）

### 计算机基本单位

- 单位
  - 最小的数据单位 b。最小的储存单位 byte

|      |      |      |      |
| ---- | ---- | ---- | ---- |
| 位（比特） | bit  | b    |      |
| 字节       | byte | B    | 8    |
| 千字节     |      | KB   | 1024 |
| 兆字节     |      | MB   | 1024 |
| 吉字节     |      | GB   | 1024 |
| 太字节     |      | TB   | 1024 |

- 进制

#### 整数数据表示

- 各种数值在计算机中的表示形式称为机器数，二进制计数

- 带符号的机器数可用原码、反码、补码进行编码

- 原码：最高位符号位，0正1负

- 反码：最高位符号位，0正1负。正数的原码和反码相同，**负数反码是绝对值按位取反**

- 补码：最高位符号位，0正1负。正数的补码同原、反，负数的补码等于反码末位+1

- 移码：补码基础上，符号位取反


- x[补]\[补] = x[原]

- 表示范围<a id="表1-1"></a>

  ![image-20241218215232492](./assets/image-20241218215232492.png)

- ±0编码相同的是 移码和补码

- 常采用补码表示运算数据，**原因是补码可以简化计算机运算部件设计**（把减法当加法运算，减去一个数=加它的补码）

#### 浮点数表示

- **N = 2<sup>E</sup> * F**           E：阶码，为整数  F：尾数，为带符号的纯小数

- 浮点数表示格式：阶符 + 阶码 + 数符 + 尾数

- 浮点数能表示的**数值范围**由**阶码**决定，数值精度由**尾数**决定

- 规格化浮点数：将尾数的绝对值限定在**[0.5, 1]**

- 范围结论：

  ![image-20241222204824561](./assets/image-20241222204824561.png)

  > 推导：
  > 已知 阶码E为整数，尾数F为小数
  > 最大的正数：E为最大，F为最大
  > 最小的负数：E最大，F为最小
  > 参考[表1-1](#表1-1)可得出结论

📒 从题中的总结

- 工业标准IEEE754浮点数格式中阶码采用移码、尾数采用原码表示
- 在总位数相同的情况下，浮点表示法相对于定点表示法可以表示更大的数
-  对阶：将小阶向大阶对齐，尾数向右移

#### 寻址

- 立即寻址 操作数在指令中
- 直接寻址 操作数在内存单元 指令给出储存单元的地址
- 寄存器寻址 操作数在寄存器 指令给出寄存器名
- 寄存器间接寻址 操作数在内存单元 内存单元地址在寄存器中
- 间接寻址 指令中给出操作数地址的地址（指针）
- 相对寻址 指令地址码给出偏移量，操作数地址=本条指令地址+偏移量
- 变址寻址 操作数地址等于变址寄存器内容+偏移量

📒 从题中的总结

- 采用不同寻址方式的目的：扩大寻址空间并提高编程灵活性

#### 校验码

- **奇偶检验码** 增加**一位**校验位，使编码中1的个数为奇数（奇校验）或偶数（偶校验） **码距为2**

- 奇偶检验码分为三种：水平奇偶检验码、垂直奇偶检验码、水平垂直奇偶检验码

- **码距** 编码系统中任意两个合法编码至少有多少个二进制位不同，码距=2时具有检错能力，码距≥3时，可能有纠错能力

- **海明码** 在数据位之间的特定位置插入k个校验码，通过**扩大码距**实现**检错和纠错**。数据位n位，校验位k位，n和k必须满足以下关系

  **2<sup>k</sup> - 1 ≥ n + k**

- **CRC循环冗余校验码** 利用**生成多项式**为k个数据位生成r个校验位进行编码 采用**模2运算**

  ![image-20241225211010882](./assets/image-20241225211010882.png)

📒 从题中的总结

- 海明码利用多组数位的奇偶性来检错和纠错

#### RISC CISC

![image-20241225211949059](./assets/image-20241225211949059.png)

📒 从题中的总结

- 采用CISC技术的CPU，芯片设计复杂度更高
- RISC编译器的子程序库通常比CISC编译器的子程序库大得多
- RISC比CISC更适合VLSI工艺的规整性要求
- RISC增加寄存器数目以减少访问次数
- RISC用硬布线电路实现指令解码，快速完成指令译码

#### 指令流水线

![image-20241225213434089](./assets/image-20241225213434089.png)

- 流水线时间 = 一条指令执行时间 + ( n - 1 ) * 操作周期
- 加速比 = 不采用流水线时间 / 采用流水线时间
- 操作周期：一个指令中的最长时间段
- 吞吐率：1 / 操作周期
- 执行n条指令的吞吐率：n / 流水线时间
